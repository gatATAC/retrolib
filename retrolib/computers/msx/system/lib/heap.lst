                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.2.0 #8008 (Jul 27 2012) (Linux)
                              4 ; This file was generated Sun Sep  8 19:21:41 2013
                              5 ;--------------------------------------------------------
                              6 	.module heap
                              7 	.optsdcc -mz80
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _malloc
                             13 ;--------------------------------------------------------
                             14 ; special function registers
                             15 ;--------------------------------------------------------
                             16 ;--------------------------------------------------------
                             17 ; ram data
                             18 ;--------------------------------------------------------
                             19 	.area _DATA
                             20 ;--------------------------------------------------------
                             21 ; absolute external ram data
                             22 ;--------------------------------------------------------
                             23 	.area _DABS (ABS)
                             24 ;--------------------------------------------------------
                             25 ; global & static initialisations
                             26 ;--------------------------------------------------------
                             27 	.area _HOME
                             28 	.area _GSINIT
                             29 	.area _GSFINAL
                             30 	.area _GSINIT
                             31 ;--------------------------------------------------------
                             32 ; Home
                             33 ;--------------------------------------------------------
                             34 	.area _HOME
                             35 	.area _HOME
                             36 ;--------------------------------------------------------
                             37 ; code
                             38 ;--------------------------------------------------------
                             39 	.area _CODE
                             40 ;src/heap.c:7: void *malloc(uint16_t size) {
                             41 ;	---------------------------------
                             42 ; Function malloc
                             43 ; ---------------------------------
   0000                      44 _malloc_start::
   0000                      45 _malloc:
                             46 ;src/heap.c:8: uint8_t *ret = heap_top;
   0000 ED 5Br00s00          47 	ld	de,(_heap_top)
                             48 ;src/heap.c:9: heap_top += size;
   0004 21 02 00             49 	ld	hl,#2
   0007 39                   50 	add	hl,sp
   0008 D5                   51 	push	de
   0009 FD 21r00s00          52 	ld	iy,#_heap_top
   000D FD E5                53 	push	iy
   000F D1                   54 	pop	de
   0010 1A                   55 	ld	a,(de)
   0011 86                   56 	add	a, (hl)
   0012 12                   57 	ld	(de),a
   0013 13                   58 	inc	de
   0014 1A                   59 	ld	a,(de)
   0015 23                   60 	inc	hl
   0016 8E                   61 	adc	a, (hl)
   0017 12                   62 	ld	(de),a
                             63 ;src/heap.c:10: return (void *) ret;
   0018 E1                   64 	pop	hl
   0019 C9                   65 	ret
   001A                      66 _malloc_end::
                             67 	.area _CODE
                             68 	.area _CABS (ABS)
